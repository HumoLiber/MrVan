(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[516],{2961:(e,a,r)=>{var t={"./ca/common.json":[8517,517],"./en/common.json":[1871,871],"./es/common.json":[7433,433],"./fr/common.json":[2285,285],"./it/common.json":[8014,14]};function s(e){if(!r.o(t,e))return Promise.resolve().then(()=>{var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a});var a=t[e],s=a[0];return r.e(a[1]).then(()=>r.t(s,19))}s.keys=()=>Object.keys(t),s.id=2961,e.exports=s},6101:(e,a,r)=>{"use strict";r.d(a,{A:()=>h});var t=r(7876),s=r(4232),n=r(8230),o=r.n(n),l=r(9099);function i(){let{locale:e}=(0,l.useRouter)(),[a,t]=(0,s.useState)(null);return(0,s.useEffect)(()=>{r(2961)(`./${e}/common.json`).then(e=>{t(e.default)}).catch(()=>{r.e(871).then(r.t.bind(r,1871,19)).then(e=>{t(e.default)})})},[e]),a}let c=()=>{let e=(0,l.useRouter)(),{pathname:a,asPath:r,query:s}=e,n=[{code:"en",name:"English",flag:"\uD83C\uDDEC\uD83C\uDDE7"},{code:"es",name:"Espa\xf1ol",flag:"\uD83C\uDDEA\uD83C\uDDF8"},{code:"ca",name:"Catal\xe0",flag:"\uD83C\uDFF4\uDB40\uDC65\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74\uDB40\uDC7F"},{code:"it",name:"Italiano",flag:"\uD83C\uDDEE\uD83C\uDDF9"},{code:"fr",name:"Fran\xe7ais",flag:"\uD83C\uDDEB\uD83C\uDDF7"}],o=t=>{e.push({pathname:a,query:s},r,{locale:t}),localStorage.setItem("preferredLanguage",t)};return(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("button",{className:"flex items-center space-x-1 text-gray-700 hover:text-indigo-600",children:[(0,t.jsx)("span",{children:n.find(a=>a.code===e.locale)?.flag}),(0,t.jsx)("span",{className:"hidden sm:inline",children:n.find(a=>a.code===e.locale)?.name}),(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,t.jsx)("div",{className:"absolute right-0 z-10 mt-2 w-48 bg-white rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300",children:(0,t.jsx)("div",{className:"py-1",children:n.map(a=>(0,t.jsxs)("button",{onClick:()=>o(a.code),className:`flex items-center w-full px-4 py-2 text-sm ${e.locale===a.code?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"}`,children:[(0,t.jsx)("span",{className:"mr-2",children:a.flag}),(0,t.jsx)("span",{children:a.name})]},a.code))})})]})},d=()=>{let e=i();return e?(0,t.jsx)("header",{className:"bg-white shadow-sm fixed top-0 left-0 right-0 z-50",children:(0,t.jsxs)("div",{className:"container-custom flex justify-between items-center py-4",children:[(0,t.jsx)(o(),{href:"/",className:"flex items-center",children:(0,t.jsx)("span",{className:"text-2xl font-bold text-indigo-600",children:"\uD83D\uDE90 MrVan"})}),(0,t.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[(0,t.jsx)(o(),{href:"/",className:"text-gray-700 hover:text-indigo-600 transition-colors",children:e.header.home}),(0,t.jsx)(o(),{href:"/#features",className:"text-gray-700 hover:text-indigo-600 transition-colors",children:e.header.features}),(0,t.jsx)(o(),{href:"/contact",className:"text-gray-700 hover:text-indigo-600 transition-colors",children:e.header.contact}),(0,t.jsx)(c,{}),(0,t.jsx)(o(),{href:"/login",className:"btn-primary",children:e.header.login})]}),(0,t.jsx)("button",{className:"md:hidden text-gray-700 focus:outline-none",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})}):(0,t.jsx)("div",{children:"Loading..."})},m=()=>{let e=i();return e?(0,t.jsx)("footer",{className:"bg-gray-900 text-white",children:(0,t.jsx)("div",{className:"container-custom py-12",children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)(o(),{href:"/",className:"flex items-center mb-6",children:(0,t.jsx)("span",{className:"text-3xl font-bold text-white",children:"\uD83D\uDE90 MrVan"})}),(0,t.jsx)("p",{className:"text-gray-400 mb-8 text-center",children:e.footer.tagline}),(0,t.jsxs)("div",{className:"flex space-x-4 mb-8",children:[(0,t.jsxs)("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[(0,t.jsx)("span",{className:"sr-only",children:"Facebook"}),(0,t.jsx)("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})]}),(0,t.jsxs)("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[(0,t.jsx)("span",{className:"sr-only",children:"Instagram"}),(0,t.jsx)("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})]}),(0,t.jsxs)("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[(0,t.jsx)("span",{className:"sr-only",children:"Twitter"}),(0,t.jsx)("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})]})]}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:e.footer.copyright})]})})}):(0,t.jsx)("div",{children:"Loading..."})},h=e=>{let{children:a}=e;return(0,t.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,t.jsx)(d,{}),(0,t.jsx)("main",{className:"flex-grow pt-16",children:a}),(0,t.jsx)(m,{})]})}},7657:(e,a,r)=>{"use strict";r.r(a),r.d(a,{__N_SSG:()=>h,default:()=>x});var t=r(7876),s=r(1753),n=r(7328),o=r.n(n),l=r(4232),i=r(9611),c=r(6101),d=r(9744),m=r(9099),h=!0;function x(){let{t:e}=(0,s.Bd)("common"),a=(0,m.useRouter)(),[r,n]=(0,l.useState)({companyName:"",registrationNumber:"",contactPersonName:"",email:"",phone:"",address:"",delegationModel:"",agreeToModernize:!1}),[h,x]=(0,l.useState)({camperMake:"",camperModel:"",camperYear:"",camperPlate:""}),[u,p]=(0,l.useState)(!1),[g,f]=(0,l.useState)(null),[j,v]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=localStorage.getItem("companyRegistrationData");if(e)try{let a=JSON.parse(e);n(a)}catch(e){console.error("Error parsing saved company data:",e),a.push("/onboarding/companyInfo")}else a.push("/onboarding/companyInfo")},[a]);let N=e=>{let{name:a,value:r}=e.target;x({...h,[a]:r})},b=async e=>{e.preventDefault(),f(null),v(null),p(!0);try{let{data:e,error:t}=await d.A.from("users").insert([{email:r.email,name:r.contactPersonName,role:"company",phone:r.phone,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select("id").single();if(t)throw Error(`Error saving company data: ${t.message}`);let s=e.id;console.log("Company successfully registered with ID:",s);let{data:n,error:o}=await d.A.from("vehicles").insert([{owner_id:s,make:h.camperMake,model:h.camperModel,year:parseInt(h.camperYear)||new Date().getFullYear(),plate:h.camperPlate,delegation_model:r.delegationModel.replace("-","_"),modernize_agreed:r.agreeToModernize,status:"draft",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select("id").single();if(o)throw Error(`Error saving vehicle data: ${o.message}`);console.log("Vehicle successfully registered with ID:",n.id);let{data:l,error:i}=await d.A.from("agreements").insert([{user_id:s,agreement_type:`company_${r.delegationModel}`,signature_status:"pending",created_at:new Date().toISOString()}]).select("id");i&&console.warn("Warning: failed to create agreement:",i),v("Data successfully saved! Redirecting to the next step..."),localStorage.removeItem("companyRegistrationData"),setTimeout(()=>{a.push("/onboarding/success")},2e3)}catch(e){console.error("Error processing form:",e),f(e instanceof Error?e.message:"An unknown error occurred while saving data")}finally{p(!1)}};return(0,t.jsxs)(c.A,{children:[(0,t.jsxs)(o(),{children:[(0,t.jsx)("title",{children:"Camper Information | MrVan"}),(0,t.jsx)("meta",{name:"description",content:"Register your camper fleet with MrVan"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsx)("section",{className:"py-20",children:(0,t.jsx)("div",{className:"container-custom",children:(0,t.jsx)("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-md overflow-hidden",children:(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-center text-gray-900 mb-6",children:"\uD83D\uDE90 Camper Registration"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8 text-center",children:"Register your camper fleet with MrVan."}),g&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-4",children:g}),j&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md mb-4",children:j}),(0,t.jsxs)("form",{onSubmit:b,children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-indigo-600 mt-6 mb-4",children:"Camper Information"}),(0,t.jsx)(i.A,{id:"camperMake",name:"camperMake",label:"Camper Make",value:h.camperMake,onChange:N,required:!0}),(0,t.jsx)(i.A,{id:"camperModel",name:"camperModel",label:"Camper Model",value:h.camperModel,onChange:N,required:!0}),(0,t.jsx)(i.A,{id:"camperYear",name:"camperYear",type:"number",label:"Year of Manufacture",value:h.camperYear,onChange:N,required:!0}),(0,t.jsx)(i.A,{id:"camperPlate",name:"camperPlate",label:"License Plate",value:h.camperPlate,onChange:N,required:!0})]}),(0,t.jsxs)("div",{className:"mt-8 flex items-center justify-between",children:[(0,t.jsx)("button",{type:"button",onClick:()=>a.push("/onboarding/companyInfo"),className:"btn-secondary",disabled:u,children:"Back to Company Info"}),(0,t.jsx)("button",{type:"submit",className:"btn-primary",disabled:u,children:u?"Saving...":"Complete Registration"})]})]})]})})})})]})}},9424:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/onboarding/camperInfo",function(){return r(7657)}])},9611:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});var t=r(7876);function s(e){let{id:a,name:r,label:s,value:n,onChange:o,type:l="text",placeholder:i,required:c=!1}=e;return(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700 mb-1",children:[s," ",c&&(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{id:a,name:r,type:l,value:n,onChange:o,placeholder:i,required:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})}r(4232)},9744:(e,a,r)=>{"use strict";r.d(a,{A:()=>l});var t=r(6879),s=r(5364);let n=s.env.NEXT_PUBLIC_SUPABASE_URL||"https://ektalbtnirqlttfkxdhe.supabase.co",o=s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVrdGFsYnRuaXJxbHR0Zmt4ZGhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI1Nzg0MDMsImV4cCI6MjA1ODE1NDQwM30.rAnmyyn7W9VHmb8f0LOEQ6LesoqpaFZjT034IyHkBes";n&&o||console.error("Відсутні Supabase URL або ключ! Перевірте налаштування середовища."),console.log("Supabase URL:",n);let l=(0,t.UU)(n,o)}},e=>{var a=a=>e(e.s=a);e.O(0,[695,753,260,636,593,792],()=>a(9424)),_N_E=e.O()}]);